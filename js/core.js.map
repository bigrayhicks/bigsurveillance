{"version":3,"sources":["core.js"],"names":["window","components","petitions","doc","win","numberCommafier","number","toString","replace","progressBar","targetValue","targetGoal","loading","value","step","Math","ceil","guardedTargetVal","max","clearInterval","animate","commafiedNumber","progressbar","setAttribute","getElementById","textContent","isNaN","parseInt","setInterval","handleProgressBarError","requestAPIInfo","apiData","anRequest","XMLHttpRequest","open","apiHost","objectIdentifier","addEventListener","status","JSON","parse","responseText","signatures","goal","location","hostname","querySelector","style","display","send","updateZIPPlaceholder","ZIPLabel","countrySelect","toggleCountryField","countryInput","parentNode","removeChild","classList","add","countryLabel","submitForm","event","compilePayload","tags","util","getReferrerTag","push","formData","FormData","append","org","stringify","href","petitionSignatureForm","action","getAttribute","checked","queryString","source","autoresponderHours","autoresponderActive","content","mothershipTag","document","pathname","preventDefault","signatureSubmission","callbacks","preSubmit","handleSigningError","loadSignatureResponse","FreeProgress","convert","addEventListeners","init","body","getElementsByTagName","dataset","host","petitionId","parseQueryString","whiplist","states","names","politiciansByState","politiciansByName","makeSortable","id","politicians","querySelectorAll","i","length","state","name","indexOf","sort","renderSortElement","div","$c","label","select","option1","option2","className","htmlFor","appendChild","bindSortElementEvents","skipFilter","whip","innerHTML","selectedIndex","targetArr","targetObj","j","filter","renderFilterElement","option","bindFilterElementEvents","filterState","lis","whiplists","PoliticalScoreboardController","Composer","Controller","extend","elements",".internet .filtered",".surveillance .filtered",".unknown .filtered",".team.unknown","events","change select","collection","good","bad","meh","this","render","FilterCollection","model","get","init_list","good_list","bad_list","meh_list","with_bind","maybeHideMehPanel","bind","filterCollection","inject","masterCollection","ListController","track","options","PoliticianController","el","bind_reset","PoliticalScoreboardView","html","refresh","models","meh_panel","remove","click button.tweet_link","click button.info_link","click h4","click .headshot","click .inline_tweet","click .peekaboo",".peekaboo","noGrade","extraInfo","PoliticianView","politician","toJSON","tweet","e","charAt","url","protocol","txt","encodeURIComponent","info","PoliticianModalController","click","target","hidden","BaseShareModalController","show","console","log","overlay","base_render","firstChild","PoliticianModalView","positions","Politician","Model","populateFromGoogle","entry","field","trim","set","first_name","last_name","image","bioguide","email","phone","organization","state_short","shortenState","twitter","party","vote_usaf","vote_tempreauth","office1","office1phone","office1geo","office2","office2phone","office2geo","office3","office3phone","office3geo","office4","office4phone","office4geo","office5","office5phone","office5geo","office6","office6phone","office6geo","office7","office7phone","office7geo","office8","office8phone","office8geo","score","score_criteria","fisa_courts_reform_act","s_1551_iosra","fisa_improvements_act","fisa_transparency_and_modernization_act","surveillance_state_repeal_act","usa_freedom_prior_to_20140518","voted_for_conyers_amash_amendment","voted_for_house_version_of_usa_freedom_act_2014","voted_for_massie_lofgren_amendment_2014","whistleblower_protection_for_ic_employees_contractors","first_usaf_cloture_vote","straight_reauth","fisa_reform_act","amendment_1449_data_retention","amendment_1450_extend_implementation_to_1yr","amendment_1451_gut_amicus","final_passage_usaf","s_702_reforms","massie_lofgren_amendment_to_hr2685_defund_702","massie_lofgren_amendment_to_hr4870_no_backdoors","ECPA_reform_cosponsor","house_PCNA","house_NCPA","CISA_cloture_vote","franken_cisa_amendment","wyden_cisa_amendment","heller_cisa_amendment","coons_cisa_amendment","cisa_final","silent","doScore","inc","undefined","grade","key","STATES","hasOwnProperty","Politicians","Collection","sortfn","a","b","PoliticiansFilter","data","container","goodPoliticians","badPoliticians","mehPoliticians","chamberOptGroup","stateOptGroup","allCongress","senate","house","goodHeadline","badHeadline","mehHeadline","goodSubHead","badSubHead","selected","headshot","img","tweetLink","infoLink","rollover","ul","li","block","modal","close","title","voteList","position","position_link","generateSpinner","spinContainer","spinner","blade","subdiv","ref","referrer","pairs","queryObject","search","substr","split","TWEET_BLASTER_URL","SPREADSHEET_URL","DEFAULT_TWEETS","AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","unfilteredPoliticians","geocode","xhr","onreadystatechange","readyState","res","response","feed","checkIfFinishedWithXHRs","xhr2","initializeScoreboard","renderTopStateSelector","onchange","sbState","UIEvent","view","bubbles","cancelable","dispatchEvent","setTimeout","loadTopPoliticiansByState","onclick","handleTweetSelectorLabels","topPoliticians","hasTweeted","generateTweetTextFromTopPoliticians","senators","release","handleRemainingTweetText","remaining","subdivisions","iso_code","getParameterByName","tweetText","select_one","searchInput","filterByPartialName","levenshteinDistance","str1","str2","Error","distances","min","apply","toLowerCase","distanceThreshold","results","n","filtered","m","fname","match","lname","concat","results_elem","frag","createDocumentFragment","createElement","button","text","createTextNode","cb","br","alreadyBlasted","onhashchange","hash","src","popCallModal","coinToss","random","DONATE_URL","tweeted","CallModalController","headline","campaign","cta","callScript","shareText","onDomContentLoaded","alert","pollTimer","closed","random_tweet","floor","validatePhone","CallScriptModalController","callHeadline","callInstruction","expandArticle","viewMoreLinks","getElementsByClassName","links","tableLinks","corporateScoreboard","disabled","form","thanks","removeAttribute"],"mappings":"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","file":"core.js","sourcesContent":["/*\n @licstart  The following is the entire license notice for the\n    JavaScript code in this page.\n\n Copyright (C) 2015 Fight for the Future\n Copyright (C) 2015 Zaki Manian\n\n The JavaScript code in this page is free software: you can\n redistribute it and/or modify it under the terms of the GNU\n General Public License (GNU GPL) as published by the Free Software\n Foundation, either version 3 of the License, or (at your option)\n any later version. The code is distributed WITHOUT ANY WARRANTY;\n without even the implied warranty of MERCHANTABILITY or FITNESS\n FOR A PARTICULAR PURPOSE. See the GNU GPL for more details.\n\n As additional permission under GNU GPL version 3 section 7, you\n may distribute non-source (e.g., minimized or compacted) forms of\n that code without the copy of the GNU GPL normally required by\n section 4, provided you include this license notice and a URL\n through which recipients can access the Corresponding Source.\n\n @licend  The above is the entire license notice\n    for the JavaScript code in this page.\n*/\nwindow.components = window.components || {};\nwindow.components.petitions = function (doc, win) {\n  /**\n   * Retrieves petition data from Action Network API, then submits signature\n   * @param {object} doc - Document object\n   * @param {object} win - Window object\n   * */\n  \"use strict\";\n\n  var\n    body = doc.getElementsByTagName('body')[0],\n    petitionSignatureForm = doc.getElementById('petition-form'),\n    apiHost = petitionSignatureForm.dataset.host,\n    objectIdentifier = petitionSignatureForm.dataset.petitionId,\n    submitButton = body.querySelector('[type=\"submit\"]'),\n    countryInput = doc.getElementById('hidden-country'),\n    countrySelect = doc.getElementById('select-country'),\n    countryLabel = doc.querySelector('[for=\"select-country\"]'),\n    queryString = win.util.parseQueryString();\n\n  function numberCommafier(number) {\n    /**\n     * Returns a string representing a number with commas\n     * @param {int} number - the number to transform\n     * */\n\n    return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  }\n\n  function progressBar(targetValue, targetGoal) {\n    /**\n     * Animates the value of a progress bar\n     * @param {int} targetValue - the target value attribute of the progress bar\n     * @param {int} targetGoal - the target max attribute of the progress bar\n     * */\n\n    var\n      guardedTargetVal = targetValue.isNaN ? 0 : targetValue,\n      animate,\n      value = 0,\n      progressbar = doc.getElementById('signatures-progress-bar'),\n      max = parseInt(targetGoal),\n      step = (guardedTargetVal / 1500) * 30; // 1500 ms total, 30ms minimum\n                                             // interval\n\n    if (!progressbar)\n      return false;\n\n    function loading() {\n      value += step;\n      value = Math.ceil(value);\n      if (value >= guardedTargetVal || value >= max) {\n        value = guardedTargetVal;\n        clearInterval(animate);\n      }\n\n      var\n        commafiedNumber = numberCommafier(value);\n\n      progressbar.setAttribute('max', max.toString(10));\n      progressbar.setAttribute('value', value.toString(10));\n      progressbar.setAttribute('title', commafiedNumber + ' signatures');\n      doc.getElementById('total-sigs').textContent = commafiedNumber;\n      doc.getElementById('sigs-to-go').textContent = numberCommafier(targetGoal - value) + ' needed to reach ' + numberCommafier(targetGoal);\n      progressbar.textContent = commafiedNumber + ' signatures';\n    }\n\n    animate = setInterval(function () {\n      loading();\n    }, 30);\n  }\n\n  function handleProgressBarError() {\n    /**\n     * Sets values for the progress bar even if there's a server or XHR error\n     * */\n    progressBar(1519, 2500);\n  }\n\n  function requestAPIInfo() {\n    /**\n     * Builds and sends request to API server\n     * */\n    var\n      apiData,\n      anRequest = new XMLHttpRequest();\n\n    anRequest.open('GET', apiHost + '/petition?identifier=' + objectIdentifier, true);\n    anRequest.addEventListener('load', function () {\n      if (anRequest.status >= 200 && anRequest.status < 400) {\n\n          apiData = JSON.parse(anRequest.responseText);\n\n        progressBar(apiData.signatures, apiData.goal);\n\n        // remove this after save-chelsea has > 1000 signatures\n        if (win.location.hostname === 'www.freechelsea.com' && apiData.signatures < 1000) {\n          doc.querySelector('.signatures').style.display = 'none';\n        }\n\n      } else {\n        handleProgressBarError();\n      }\n    });\n    anRequest.addEventListener('error', handleProgressBarError);\n    anRequest.send();\n  }\n\n  function updateZIPPlaceholder() {\n    /**\n     * Updates placeholder on ZIP/Post Code field to be appropriate for country\n     * selected\n     * */\n    var\n      ZIPLabel = doc.getElementById('form-zip_code');\n\n    if (countrySelect.value !== 'US') {\n      ZIPLabel.setAttribute('placeholder', 'Post Code');\n    } else {\n      ZIPLabel.setAttribute('placeholder', 'ZIP');\n    }\n  }\n\n  function toggleCountryField() {\n    /**\n     * Hides the label and shows the select when someone changes their signature\n     * country.\n     * */\n\n    countryInput.parentNode.removeChild(countryInput);\n    countrySelect.setAttribute('name', 'signature[country]');\n    countrySelect.classList.add('visible');\n    countryLabel.classList.add('hidden');\n  }\n\n  function submitForm(event) {\n    /**\n     * Submits the form to ActionNetwork. If the script doesn’t, by now, know\n     * the action_network identifier, default isn’t prevented on the event and\n     * form submission proceeds as normal.\n     * @param {event} event - Form submission event\n     * */\n\n    if (objectIdentifier) {\n      event.preventDefault();\n    }\n\n    var\n      signatureSubmission = new XMLHttpRequest();\n\n    win.callbacks.petitions.preSubmit();\n\n    function compilePayload() {\n      /**\n       * Compiles the form data into a JSON payload for Ajax submission\n       * @return {object} petitionFormData - just the info the API needs\n       * */\n      var tags = JSON.parse(doc.querySelector('[name=\"subscription[tag_list]\"]').value);\n      if (util.getReferrerTag())\n        tags.push(util.getReferrerTag());\n\n      var formData = new FormData();\n      formData.append('guard', '');\n      formData.append('hp_enabled', true);\n      formData.append('org', window.org ? window.org : 'fftf');\n      formData.append('an_tags', JSON.stringify(tags));\n      formData.append('an_url', win.location.href);\n      formData.append('an_petition', petitionSignatureForm.action.replace('/signatures', ''));\n      formData.append('member[first_name]', doc.getElementById('form-first_name').value);\n      formData.append('member[email]', doc.getElementById('form-email').value);\n      formData.append('member[postcode]', doc.getElementById('form-zip_code').value);\n      formData.append('member[country]', countrySelect.value);\n\n      if (doc.getElementById('opt-in') && doc.getElementById('opt-in').getAttribute('type') === 'checkbox' && doc.getElementById('opt-in').checked === false) {\n        formData.append('opt_out', true);\n      }\n\n      if (doc.getElementById('form-street_address')) {\n        formData.append('member[street_address]', doc.getElementById('form-street_address').value);\n      }\n\n      if (doc.getElementById('form-phone_number')) {\n        formData.append('member[phone_number]', doc.getElementById('form-phone_number').value);\n      }\n\n      if (doc.getElementById('form-comments')) {\n        formData.append('action_comment', doc.getElementById('form-comments').value);\n      }\n\n      if (queryString.source) {\n        formData.append('subscription[source]', queryString.source);\n      }\n\n      var autoresponderHours = doc.querySelector('meta[name=\"autoresponder_hours\"]'),\n          autoresponderActive = doc.querySelector('meta[name=\"autoresponder_active\"]');\n      formData.append('autoresponder_hours', autoresponderHours ? autoresponderHours.content : 72);\n\n      if (autoresponderActive)\n        formData.append('autoresponder_active', 1);\n\n      var mothershipTag = document.querySelector('input[name=\"_mothership_tag\"]');\n      if (mothershipTag && mothershipTag.value)\n        formData.append('tag', mothershipTag.value);\n      else\n        formData.append('tag', window.location.pathname);\n\n      return formData;\n    }\n\n    signatureSubmission.open('POST', 'https://queue.fightforthefuture.org/action', true);\n    // signatureSubmission.open('POST', 'http://localhost:9001/action', true); // JL DEBUG ~\n    signatureSubmission.addEventListener('error', win.callbacks.petitions.handleSigningError);\n    signatureSubmission.addEventListener('load',  win.callbacks.petitions.loadSignatureResponse);\n    signatureSubmission.send(compilePayload());\n\n    if (typeof FreeProgress !== \"undefined\")\n      FreeProgress.convert();\n  }\n\n  function addEventListeners() {\n    /**\n     * Attaches all the listeners all the places\n     * */\n    countryLabel.addEventListener('click', toggleCountryField);\n    countrySelect.addEventListener('change', updateZIPPlaceholder);\n    petitionSignatureForm.addEventListener('submit', submitForm);\n  }\n\n  function init() {\n    requestAPIInfo();\n    addEventListeners();\n  }\n\n  init();\n};\n\n;window.components = window.components || {};\nwindow.components.whiplist = function (doc, win) {\n  \"use strict\";\n\n  var states = {};\n  var names = {};\n  var politiciansByState = {};\n  var politiciansByName = {};\n\n  var makeSortable = function(id) {\n\n    // make sure our IDs are tracked properly\n    states[id] = [];\n    names[id] = []\n    politiciansByState[id] = {};\n    politiciansByName[id] = {};\n\n\n    var politicians = doc.getElementById(id).querySelectorAll('li');\n\n    for (var i=0; i<politicians.length; i++) {\n      var state = politicians[i].querySelector('input[name=\"state\"]').value;\n      var name  = politicians[i].querySelector('input[name=\"lastname\"]').value;\n\n      if (states[id].indexOf(state) === -1)\n        states[id].push(state);\n\n      if (names[id].indexOf(name) === -1)\n        names[id].push(name);\n\n      if (typeof politiciansByState[id][state] === \"undefined\")\n        politiciansByState[id][state] = [politicians[i]];\n      else\n        politiciansByState[id][state].push(politicians[i]);\n\n      if (typeof politiciansByName[id][name] === \"undefined\")\n        politiciansByName[id][name] = [politicians[i]];\n      else\n        politiciansByName[id][name].push(politicians[i]);\n    }\n    states[id] = states[id].sort();\n    names[id] = names[id].sort();\n  }\n\n  var renderSortElement = function(id) {\n    var div     = $c('div'),\n        label   = $c('label'),\n        select  = $c('select'),\n        option1 = $c('option'),\n        option2 = $c('option');\n\n    div.className = 'sort';\n\n    label.htmlFor = 'order_' + id;\n    label.textContent = 'Sort by: ';\n\n    select.id = 'order_' + id;\n\n    option1.value = 'name';\n    option1.textContent = 'Name';\n    select.appendChild(option1);\n\n    option2.value = 'state';\n    option2.textContent = 'State';\n    select.appendChild(option2);\n\n    div.appendChild(label);\n    div.appendChild(select);\n\n    doc.getElementById('sort_' + id).appendChild(div);\n  }\n\n  var bindSortElementEvents = function(id) {\n    doc.getElementById('order_' + id).addEventListener('change', function() {\n      sort(id);\n    });\n  }\n\n  var sort = function(id, skipFilter) {\n    var whip = doc.getElementById(id);\n    var sort = doc.getElementById('order_' + id);\n\n    whip.innerHTML = '';\n\n    if (sort[sort.selectedIndex].value == 'state') {\n      var targetArr = states[id];\n      var targetObj = politiciansByState[id];\n    } else if (sort[sort.selectedIndex].value == 'name') {\n      var targetArr = names[id];\n      var targetObj = politiciansByName[id];\n    }\n\n    for (var i=0; i<targetArr.length; i++)\n      for (var j=0; j<targetObj[targetArr[i]].length; j++)\n        whip.appendChild(targetObj[targetArr[i]][j]);\n\n    if (!skipFilter)\n      filter(id);\n  }\n\n  var renderFilterElement = function(id) {\n    var div     = $c('div'),\n        label   = $c('label'),\n        select  = $c('select'),\n        option1 = $c('option');\n\n    div.className = 'filter';\n\n    label.htmlFor = 'filter_' + id;\n    label.textContent = 'Show state: ';\n\n    select.id = 'filter_' + id;\n\n    option1.value = '';\n    option1.textContent = '(all states)';\n    select.appendChild(option1);\n\n    for (var i=0; i<states[id].length; i++) {\n      var option = $c('option');\n      option.value = states[id][i];\n      option.textContent = states[id][i];\n      select.appendChild(option);\n    }\n\n    div.appendChild(label);\n    div.appendChild(select);\n\n    doc.getElementById('sort_' + id).appendChild(div);\n  }\n\n  var bindFilterElementEvents = function(id) {\n\n    doc.getElementById('filter_' + id).addEventListener('change', function() {\n      filter(id);\n    });\n  }\n\n  var filter = function(id) {\n    var whip = doc.getElementById(id);\n    var filter = doc.getElementById('filter_' + id);\n\n    sort(id, true);\n\n    if (filter.selectedIndex == 0)\n      return;\n\n    var filterState = filter[filter.selectedIndex].value,\n        lis         = whip.querySelectorAll('li');\n\n    for (var i=0; i<lis.length; i++) {\n      var state = lis[i].querySelector('input[name=\"state\"]').value;\n\n      if (state != filterState) {\n        whip.removeChild(lis[i]);\n      }\n    }\n  }\n\n  var init = function() {\n    var whiplists = document.querySelectorAll('.whip');\n\n    for (var i=0; i<whiplists.length; i++) {\n      var id = whiplists[i]['id'];\n      if (doc.getElementById('sort_' + id)) {\n\n        makeSortable(id);\n\n        renderFilterElement(id);\n        bindFilterElementEvents(id);\n\n        renderSortElement(id);\n        bindSortElementEvents(id);\n      }\n    }\n  }\n\n  init();\n};\n\n;var PoliticalScoreboardController = Composer.Controller.extend({\n    elements: {\n        '.internet .filtered': 'good_list',\n        '.surveillance .filtered': 'bad_list',\n        '.unknown .filtered': 'meh_list',\n        '.team.unknown': 'meh_panel',\n        'select': 'select'\n    },\n\n    events: {\n        'change select': 'filter'\n    },\n\n    collection: null,\n    good: null,\n    bad: null,\n    meh: null,\n\n    init: function() {\n        this.render();\n\n        this.good = new Composer.FilterCollection(this.collection, {\n            filter: function(model) {\n                return model.get('score') >= 6;\n            }\n        });\n        this.init_list(this.good, this.good_list);\n\n        this.bad = new Composer.FilterCollection(this.collection, {\n            filter: function(model) {\n                return model.get('score') < 0;\n            }\n        });\n        this.init_list(this.bad, this.bad_list);\n\n        this.meh = new Composer.FilterCollection(this.collection, {\n            filter: function(model) {\n                return model.get('score') >= 0 && model.get('score') <= 5;\n            }\n        });\n        this.init_list(this.meh, this.meh_list);\n\n        // hide the \"unclear\" section if no politicians in it\n        this.with_bind(this.meh, 'reset', this.maybeHideMehPanel.bind(this));\n\n        this.maybeHideMehPanel();\n    },\n\n    init_list: function(filterCollection, inject) {\n\n        var masterCollection = this.collection;\n\n        new Composer.ListController({\n            collection: filterCollection,\n            inject: inject,\n            init: function() {\n                this.track(this.collection, function(model, options) {\n                    return new PoliticianController({\n                        inject: this.el,\n                        model: model,\n                        masterCollection: masterCollection\n                    });\n                }.bind(this), {bind_reset: true})\n            }\n        });\n    },\n\n    render: function() {\n        var div = PoliticalScoreboardView({state: this.collection.state});\n        this.html(div);\n    },\n\n    filter: function() {\n        var state = this.select.options[this.select.selectedIndex].value;\n\n        this.collection.state = state;\n        this.collection.refresh();\n    },\n\n    maybeHideMehPanel: function() {\n        if (this.meh.models().length == 0) {\n            this.meh_panel.classList.add('hidden');\n        } else {\n            this.meh_panel.classList.remove('hidden');\n        }\n    }\n});\n\n;var PoliticianController = Composer.Controller.extend({\n\n    events: {\n        'click button.tweet_link': 'tweet',\n        'click button.info_link': 'info',\n        'click h4': 'tweet',\n        'click .headshot': 'tweet',\n        'click .inline_tweet': 'tweet',\n        'click .peekaboo': 'click'\n    },\n\n    elements: {\n        '.peekaboo': 'hidden'\n    },\n\n    model: null,\n    noGrade: false,\n    extraInfo: false,\n    masterCollection: null,\n\n    init: function () {\n        this.render();\n    },\n\n    render: function () {\n\n        if (this.masterCollection && this.masterCollection.state)\n            var state = this.masterCollection.state;\n        else\n            var state = null;\n\n        var div = PoliticianView({\n            state: state,\n            politician: this.model.toJSON(),\n            noGrade: this.noGrade,\n            extraInfo: this.extraInfo\n        });\n\n        this.html(div);\n\n        if (state == 'all' || state == 'senate' || state == 'house')\n            this.el.className = 'block';\n        else\n            this.el.className = 'politician';\n    },\n\n    tweet: function (e) {\n        e.preventDefault();\n\n        var name = this.model.get('twitter');\n        if (name) {\n            // name = '@' + name;\n            name = '.@' + name;\n        } else {\n            if (this.model.get('organization') == 'House')\n                name = 'Rep. ' + this.model.get('last_name');\n            else\n                name = 'Sen. ' + this.model.get('last_name');\n        }\n        if (this.model.get('grade').charAt(0) == 'A' || this.model.get('grade').charAt(0) == 'F')\n            var article = 'an';\n        else\n            var article = 'a';\n\n        var url = window.location.protocol + '//' + window.location.host + '?politician='+ this.model.get('bioguide');\n\n        // var txt = encodeURIComponent('Here\\'s why '+name+' got '+article+' '+this.model.get('grade')+' on surveillance: '+url+' #StopCISA');\n        var txt = encodeURIComponent(name+' please VOTE NO on McCain Amendment 4787! Don\\'t give FBI warrantless access to our browsing history. '+url);\n        window.open('https://twitter.com/intent/tweet?text=' + txt);\n    },\n\n    info: function (e) {\n        if (e)\n            e.preventDefault();\n\n        new PoliticianModalController({model: this.model});\n    },\n\n    click: function(e) {\n        if (e)\n            e.preventDefault();\n\n        if (e.target && this.hidden && e.target == this.hidden)\n            this.info();\n    }\n});\n\n;var PoliticianModalController = BaseShareModalController.extend({\n\n    init: function() {\n        this.render();\n        this.show();\n        console.log(this.model.toJSON());\n    },\n\n    render: function() {\n        var overlay = this.base_render();\n\n        overlay.firstChild.appendChild(PoliticianModalView({\n            positions: this.model.get('score_criteria'),\n            name: this.model.get('first_name') +\" \"+ this.model.get('last_name')\n\n        }));\n\n        this.html(overlay);\n    }\n});\n\n;/**\n    Politician Model\n**/\nvar Politician = Composer.Model.extend({\n    populateFromGoogle: function(entry) {\n\n        var e = function(field) { return entry['gsx$'+field]['$t'].trim(); };\n\n        this.set({\n            first_name:      e('first'),\n            last_name:       e('name'),\n            image:           e('imagepleasedontedit'),\n            bioguide:        e('bioguide'),\n            email:           e('email'),\n            phone:           e('phone'),\n            organization:    e('organization'),\n            state:           e('state'),\n            state_short:     this.shortenState(e('state')),\n            twitter:         e('twitter'),\n            party:           e('partyaffiliation'),\n            vote_usaf:       e('voteusaf'),\n            vote_tempreauth: e('votetempreauth'),\n            office1:         e('office1'),\n            office1phone:    e('office1phone'),\n            office1geo:      e('office1geo'),\n            office2:         e('office2'),\n            office2phone:    e('office2phone'),\n            office2geo:      e('office2geo'),\n            office3:         e('office3'),\n            office3phone:    e('office3phone'),\n            office3geo:      e('office3geo'),\n            office4:         e('office4'),\n            office4phone:    e('office4phone'),\n            office4geo:      e('office4geo'),\n            office5:         e('office5'),\n            office5phone:    e('office5phone'),\n            office5geo:      e('office5geo'),\n            office6:         e('office6'),\n            office6phone:    e('office6phone'),\n            office6geo:      e('office6geo'),\n            office7:         e('office7'),\n            office7phone:    e('office7phone'),\n            office7geo:      e('office7geo'),\n            office8:         e('office8'),\n            office8phone:    e('office8phone'),\n            office8geo:      e('office8geo'),\n\n            // meta field\n            score: 0,\n            score_criteria: [],\n\n            // scorecard fields\n            fisa_courts_reform_act:                                 e('fisacourtsreformact'),\n            s_1551_iosra:                                           e('s1551iosra'),\n            fisa_improvements_act:                                  e('fisaimprovementsact'),\n            fisa_transparency_and_modernization_act:                e('fisatransparencyandmodernizationact'),\n            surveillance_state_repeal_act:                          e('surveillancestaterepealact'),\n            usa_freedom_prior_to_20140518:                          e('usafreedompriorto2014-05-18'),\n            voted_for_conyers_amash_amendment:                      e('votedforconyersamashamendment'),\n            voted_for_house_version_of_usa_freedom_act_2014:        e('votedforhouseversionofusafreedomact2014'),\n            voted_for_massie_lofgren_amendment_2014:                e('votedformassielofgrenamendment2014'),\n            whistleblower_protection_for_ic_employees_contractors:  e('whistleblowerprotectionforicemployeescontractors'),\n            first_usaf_cloture_vote:                                e('stusafcloturevote'),\n            straight_reauth:                                        e('straightreauth'),\n            fisa_reform_act:                                        e('fisareformact'),\n            amendment_1449_data_retention:                          e('amendment1449dataretention'),\n            amendment_1450_extend_implementation_to_1yr:            e('amendment1450extendimplementationto1yr'),\n            amendment_1451_gut_amicus:                              e('amendment1451gutamicus'),\n            final_passage_usaf:                                     e('finalpassageusaf'),\n            s_702_reforms:                                          e('reforms'),\n            massie_lofgren_amendment_to_hr2685_defund_702:          e('massielofgrenamendmenttohr2685defund702'),\n            massie_lofgren_amendment_to_hr4870_no_backdoors:        e('massielofgrenamendmenttohr4870nobackdoors'),\n            ECPA_reform_cosponsor:e('ecpareformcosponsor'),\n            house_PCNA:e('housepcna'),\n            house_NCPA:e('housencpaa'),\n            ECPA_reform_cosponsor:e('ecpareformcosponsor'),\n            CISA_cloture_vote:e('cisacloture'),\n            franken_cisa_amendment:e('frankencisaamendment'),\n            wyden_cisa_amendment:e('wydencisaamendment'),\n            heller_cisa_amendment:e('hellercisaamendment'),\n            coons_cisa_amendment:e('coonscisaamendment'),\n            coons_cisa_amendment:e('cottoncisaamendment'),\n            cisa_final:e('cisafinal')\n        }, {silent: true});\n        this.doScore();\n    },\n\n    doScore: function() {\n        var score = 0;\n        var score_criteria = [];\n\n        if (this.get('fisa_courts_reform_act') == 'X') {\n            var inc = 3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the FISA Courts Reform Act',\n                url: 'http://www.ibtimes.com/nsa-fisa-surveillance-obama-likely-back-secret-court-reform-senator-says-1368781'\n            });\n            score += inc;\n        }\n        if (this.get('s_1551_iosra') == 'X') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the Intelligence Oversight and Surveillance Reform Act',\n                url:   'https://cdt.org/blog/bills-offer-clear-choice-end-bulk-collection-of-americans%E2%80%99-data-or-endorse-it/'\n            });\n            score += inc;\n        }\n        if (this.get('fisa_improvements_act') == 'X') {\n            var inc = -4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the FISA Improvements Act',\n                url:'http://www.theguardian.com/world/2013/nov/15/feinstein-bill-nsa-warrantless-searches-surveillance'\n            });\n            score += inc;\n        }\n        if (this.get('fisa_transparency_and_modernization_act') == 'X') {\n            var inc = -4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the FISA Transparency and Modernization Act',\n                url:'https://www.eff.org/deeplinks/2014/04/nsa-reform-bill-intelligence-community-written-intelligence-community-and'\n            });\n            score += inc;\n        }\n        if (this.get('surveillance_state_repeal_act') == 'X') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the Surveillance State Repeal Act',\n                url:'http://www.restorethe4th.com/blog/go-big-or-go-home-pass-the-new-surveillance-state-repeal-act/'\n            });\n            score += inc;\n        }\n        if (this.get('usa_freedom_prior_to_20140518') == 'X') {\n            var inc = 2;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the original USA Freedom Act (prior to May 18th, 2014)',\n                url:' https://www.eff.org/deeplinks/2014/07/new-senate-usa-freedom-act-first-step-towards-reforming-mass-surveillance'\n            });\n            score += inc;\n        }\n        if (this.get('voted_for_conyers_amash_amendment') == 'X') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for Conyers Amash Amendment',\n                url: ' http://americablog.com/2013/07/amash-conyers-anti-nsa-amendment-lost-by-12-votes-205-217.html'\n            });\n            score += inc;\n        }\n        if (this.get('voted_for_house_version_of_usa_freedom_act_2014') == 'X') {\n            var inc = -2;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for gutted House version of USA Freedom Act of 2014',\n                url: 'https://www.eff.org/deeplinks/2014/05/eff-dismayed-houses-gutted-usa-freedom-act'\n            });\n            score += inc;\n        }\n        if (this.get('voted_for_massie_lofgren_amendment_2014') == 'X') {\n            var inc = 3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for Massie-Lofgren Amendment (2014)',\n                url:' http://www.huffingtonpost.com/2014/12/10/nsa-surveillance-spending-bill_n_6304834.html'\n            });\n            score += inc;\n        }\n        if (this.get('whistleblower_protection_for_ic_employees_contractors') == 'X') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported whistleblower protection measures for Intelligence employees and contractors',\n                url:'http://whistleblower.org/blog/121230-49-orgs-call-congress-restore-whistleblower-rights-intelligence-contractors'\n            });\n            score += inc;\n        }\n        if (this.get('first_usaf_cloture_vote') == 'GOOD') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on reauthorizing the PATRIOT Act *and* NO on cloture for the first Senate USA Freedom Act',\n                url:'http://www.thewhir.com/web-hosting-news/senate-votes-to-invoke-cloture-on-usa-freedom-act-advancing-it-to-an-amendment-process'\n\n            });\n            score += inc;\n        }\n        else if (this.get('first_usaf_cloture_vote') == 'OK') {\n            var inc = -1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on reauthorizing the PATRIOT Act *and* YES on cloture for the first Senate USA Freedom Act',\n                url:'http://www.thewhir.com/web-hosting-news/senate-votes-to-invoke-cloture-on-usa-freedom-act-advancing-it-to-an-amendment-process'\n            });\n            score += inc;\n        }\n        else if (this.get('first_usaf_cloture_vote') == 'BAD') {\n            var inc = -4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on reauthorizing the PATRIOT Act and NO on the first USA Freedom Act cloture vote',\n                url:'http://thehill.com/policy/national-security/242173-mcconnell-introduces-short-term-nsa-bill'\n            });\n            score += inc;\n        }\n        if (this.get('straight_reauth') == 'GOOD') {\n            var inc = 3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on reauthorizing the PATRIOT Act',\n                url:'http://thehill.com/policy/national-security/242173-mcconnell-introduces-short-term-nsa-bill'\n            });\n            score += inc;\n        }\n        else if (this.get('straight_reauth') == 'BAD') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on reauthorizing the PATRIOT Act',\n                url:'https://cdt.org/insight/oppose-senator-feinsteins-fisa-reform-act-of-2015/'\n            });\n            score += inc;\n        }\n        if (this.get('fisa_reform_act') == 'X') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the FISA Reform Act',\n                url:'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        if (this.get('amendment_1449_data_retention') == 'GOOD') {\n            var inc = 1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on USA Freedom data retention amendment (1449)',\n                url: 'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        else if (this.get('amendment_1449_data_retention') == 'BAD') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on USA Freedom data retention amendment (1449)',\n                url: 'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        if (this.get('amendment_1450_extend_implementation_to_1yr') == 'GOOD') {\n            var inc = 1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on amendment 1450 extending implementation of USA Freedom Act by 1 year',\n                url:'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        else if (this.get('amendment_1450_extend_implementation_to_1yr') == 'BAD') {\n            var inc = -2;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on amendment 1450 extending implementation of USA Freedom Act by 1 year',\n                url:'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        if (this.get('amendment_1451_gut_amicus') == 'GOOD') {\n            var inc = 1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on amendment 1451 to gut amicus proceedings',\n                url: 'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        else if (this.get('amendment_1451_gut_amicus') == 'BAD') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on amendment 1451 to gut amicus proceedings',\n                url: 'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        if (this.get('final_passage_usaf') == 'GOOD') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on USA Freedom Act (final passage)',\n                url:\"http://www.restorethe4th.com/blog/most-reps-voting-for-usa-freedom-were-opponents-of-surveillance-reform/\"\n            });\n            score += inc;\n        }\n        else if (this.get('final_passage_usaf') == 'OK') {\n            var inc = -1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on reforming bulk collection via USAF',\n                url:'https://www.eff.org/deeplinks/2015/05/usa-freedom-act-passes-what-we-celebrate-what-we-mourn-and-where-we-go-here'\n            });\n            score += inc;\n        }\n        else if (this.get('final_passage_usaf') == 'BAD') {\n            var inc = -4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on USA Freedom Act (final passage) and YES on extending the PATRIOT Act',\n                url:\"http://www.restorethe4th.com/blog/most-reps-voting-for-usa-freedom-were-opponents-of-surveillance-reform/\"\n            });\n            score += inc;\n        }\n        if (this.get('s_702_reforms') == 'X') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported bills reforming Section 702 of FISA',\n                url:undefined\n            });\n            score += inc;\n        }\n        if (this.get('massie_lofgren_amendment_to_hr2685_defund_702') == 'GOOD') {\n            var inc = 3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on Massie-Lofgren Amendment to HR2685: Defund Section 702 surveillance',\n                url:'https://demandprogress.org/letter-of-support-for-massie-lofgren-amendment-to-the-department-of-defense-appropriations-act-of-2016-h-r-2685/'\n            });\n            score += inc;\n        }\n        else if (this.get('massie_lofgren_amendment_to_hr2685_defund_702') == 'BAD') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on Massie-Lofgren Amendment to HR2685: Defund Section 702 surveillance',\n                url:'https://demandprogress.org/letter-of-support-for-massie-lofgren-amendment-to-the-department-of-defense-appropriations-act-of-2016-h-r-2685/'\n            });\n            score += inc;\n        }\n        if (this.get('massie_lofgren_amendment_to_hr4870_no_backdoors') == 'GOOD') {\n            var inc = 3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on Massie-Lofgren Amendment to HR4870: Ban encryption backdoors',\n                url: 'https://shutthebackdoor.net/'\n            });\n            score += inc;\n        }\n        else if (this.get('massie_lofgren_amendment_to_hr4870_no_backdoors') == 'BAD') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on Massie-Lofgren Amendment to HR4870: Ban encryption backdoors',\n                url: 'https://shutthebackdoor.net/'\n            });\n            score += inc;\n        }\n        if (this.get('ECPA_reform_cosponsor') == 'GOOD') {\n            console.log(\"ECPA\")\n            var inc = 2;\n            score_criteria.push({\n                score:  inc,\n                info:   'Co-Sponsor of Electronic Commmunication Privacy Act Reform',\n                url: 'https://www.eff.org/deeplinks/2015/09/senate-judiciary-committee-finally-focuses-ecpa-reform'\n            });\n            score += inc;\n        }\n        if (this.get('CISA_cloture_vote') == 'BAD') {\n            var inc = -4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for CISA Cloture Vote',\n                url: 'http://www.slate.com/articles/technology/future_tense/2015/10/stopcisa_the_cybersecurity_information_sharing_act_is_a_disaster.html'\n            });\n            score += inc;\n        }\n        else if (this.get('CISA_cloture_vote') == 'GOOD') {\n            var inc = 4;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted against CISA Cloture Vote',\n                url: 'http://www.slate.com/articles/technology/future_tense/2015/10/stopcisa_the_cybersecurity_information_sharing_act_is_a_disasteecpareformcosponsorr.html'\n            });\n            score += inc;\n        }\n        if (this.get('house_NCPA') == 'BAD') {\n            var inc = -2;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for National Cybersecurity Protection Advancement Act',\n                url: 'http://techcrunch.com/2015/04/23/house-passes-complementary-cyber-information-sharing-bill/'\n            });\n            score += inc;\n        }\n        else if (this.get('house_NCPA') == 'GOOD') {\n            var inc = 2;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted against National Cybersecurity Protection Advancement Act',\n                url: 'http://techcrunch.com/2015/04/23/house-passes-complementary-cyber-information-sharing-bill/'\n            });\n            score += inc;\n        }\n        if (this.get('house_PCNA') == 'BAD') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for The Protecting Cyber Networks Act ',\n                url: 'https://www.eff.org/deeplinks/2015/04/eff-congress-stop-cybersurveillance-bills'\n            });\n            score += inc;\n        }\n        else if (this.get('house_PCNA') == 'GOOD') {\n            var inc = 3;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted against The Protecting Cyber Networks Act ',\n                url: 'https://www.eff.org/deeplinks/2015/04/eff-congress-stop-cybersurveillance-bills'\n            });\n            score += inc;\n        }\n        if (this.get('franken_cisa_amendment') == 'BAD') {\n            var inc = -1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted against the Franken CISA amendment',\n                url: 'http://www.newsweek.com/senate-passes-controversial-cisa-bill-companies-share-cyber-security-387785'\n            });\n            score += inc;\n        }\n        else if (this.get('franken_cisa_amendment') == 'GOOD') {\n            var inc = 2;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted for the Franken CISA amendment ',\n                url: 'http://www.newsweek.com/senate-passes-controversial-cisa-bill-companies-share-cyber-security-387785'\n            });\n            score += inc;\n        }\n        if (this.get('wyden_cisa_amendment') == 'BAD') {\n            var inc = -1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted against the Wyden CISA amendment',\n                url: 'http://www.freedomworks.org/content/key-vote-yes-wyden-amendment-strengthen-privacy-protections-cisa'\n            });\n            score += inc;\n        }\n        else if (this.get('wyden_cisa_amendment') == 'GOOD') {\n            var inc = 2;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted for the Wyden CISA amendment ',\n                url: 'http://www.freedomworks.org/content/key-vote-yes-wyden-amendment-strengthen-privacy-protections-cisa'\n            });\n            score += inc;\n        }\n        if (this.get('heller_cisa_amendment') == 'BAD') {\n            var inc = -1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted against the Heller CISA amendment',\n                url: 'https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/'\n            });\n            score += inc;\n        }\n        else if (this.get('heller_cisa_amendment') == 'GOOD') {\n            var inc = 1;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted for the Heller CISA amendment ',\n                url: 'https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/'\n            });\n            score += inc;\n        }\n        if (this.get('coons_cisa_amendment') == 'BAD') {\n            var inc = -1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted against the Coons CISA amendment',\n                url: 'https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/'\n            });\n            score += inc;\n        }\n        else if (this.get('coons_cisa_amendment') == 'GOOD') {\n            var inc = 1;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted for the Coons CISA amendment ',\n                url: 'https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/'\n            });\n            score += inc;\n        }\n        if (this.get('cotton_cisa_amendment') == 'BAD') {\n            var inc = -2;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for the Cotton CISA amendment',\n                url: 'https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/'\n            });\n            score += inc;\n        }\n        else if (this.get('cotton_cisa_amendment') == 'GOOD') {\n            var inc = 1;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted against the Cotton CISA amendment ',\n                url: 'https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/'\n            });\n            score += inc;\n        }\n        if (this.get('cisa_final') == 'BAD') {\n            var inc = -4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for CISA in the final vote',\n                url: 'http://www.vox.com/platform/amp/2015/10/21/9587190/cisa-senate-privacy-nsa'\n            });\n            score += inc;\n        }\n        else if (this.get('cisa_final') == 'GOOD') {\n            var inc = 4;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted against CISA in the final vote ',\n                url: 'http://www.vox.com/platform/amp/2015/10/21/9587190/cisa-senate-privacy-nsa'\n            });\n            score += inc;\n        }\n        if(score >= 15){\n            var grade=\"A+\"\n        }\n        else if(score >= 12){\n            var grade=\"A\"\n        }\n        else if(score >= 10){\n            var grade=\"A-\"\n        }\n        else if(score >= 9){\n            var grade=\"B+\"\n        }\n        else if(score >= 8){\n            var grade=\"B\"\n        }\n        else if(score >= 7){\n            var grade=\"B-\"\n        }\n        else if(score >= 6){\n            var grade=\"B-\"\n        }\n        else if(score >= 5){\n            var grade=\"C+\"\n        }\n        else if(score >= 3){\n            var grade=\"C\"\n        }\n        else if(score >= 0){\n            var grade=\"C-\"\n        }\n        else if(score >= -2){\n            var grade=\"D+\"\n        }\n        else if(score >= -7){\n            var grade=\"D\"\n        }\n        else if(score >= -9){\n            var grade=\"D-\"\n        }\n        else if (this.get('last_name') == 'McConnell') {\n            var grade=\"F-\"\n        }\n        else{\n            var grade=\"F\"\n        }\n        this.set({\n            score: score,\n            grade: grade,\n            score_criteria: score_criteria\n        });\n    },\n\n    shortenState: function(state) {\n        for (var key in STATES)\n            if (STATES.hasOwnProperty(key))\n                if (STATES[key] == state)\n                    return key;\n    }\n});\n\n/**\n    Politicians Collection\n**/\nvar Politicians = Composer.Collection.extend({\n    sortfn: function(a, b) {\n\n        if (a.get('state_short') < b.get('state_short'))\n            return - 1;\n        else if (a.get('state_short') > b.get('state_short'))\n            return 1;\n        else\n            if (a.get('last_name') < b.get('last_name'))\n                return -1;\n            if (a.get('last_name') > b.get('last_name'))\n                return 1;\n            return 0;\n\n    },\n});\n\nvar PoliticiansFilter = Composer.FilterCollection.extend({\n\n    state: 'MA',\n\n    filter: function(model) {\n        var state = this.state;\n\n        if (state == 'all')\n            return true;\n        else if (state == 'house')\n            return model.get('organization') == 'House';\n        else if (state == 'senate')\n            return model.get('organization') == 'Senate';\n        else\n            return model.get('state_short') == this.state;\n    }\n});\n\n;var PoliticalScoreboardView = function (data) {\n    var\n        container = $c('div'),\n        politicians = $c('div'),\n        good = $c('div'),\n        bad = $c('div'),\n        meh = $c('div'),\n        goodPoliticians = $c('div'),\n        badPoliticians = $c('div'),\n        mehPoliticians = $c('div'),\n        label = $c('label'),\n        select = $c('select'),\n        chamberOptGroup = $c('optgroup'),\n        stateOptGroup = $c('optgroup'),\n        allCongress = $c('option'),\n        senate = $c('option'),\n        house = $c('option'),\n        goodHeadline = $c('h3'),\n        badHeadline = $c('h3'),\n        mehHeadline = $c('h3'),\n        goodSubHead = $c('em'),\n        badSubHead = $c('em');\n\n    label.textContent = 'Choose view:';\n    label.htmlFor = '_ps_choose_state';\n    container.appendChild(label);\n\n    select.id = '_ps_choose_state';\n\n    chamberOptGroup.label = 'View by Chamber';\n\n    allCongress.value = 'all';\n    allCongress.textContent = 'All Congress';\n    chamberOptGroup.appendChild(allCongress);\n\n    senate.value = 'senate';\n    senate.textContent = 'Senate';\n    chamberOptGroup.appendChild(senate);\n\n    house.value = 'house';\n    house.textContent = 'House';\n    chamberOptGroup.appendChild(house);\n\n    select.appendChild(chamberOptGroup);\n\n    stateOptGroup.label = 'View by state';\n\n    for (var key in STATES)\n        if (STATES.hasOwnProperty(key)) {\n            var state = $c('option');\n            state.value = key;\n            state.textContent = STATES[key];\n            if (key === data.state)\n                state.selected = true;\n            stateOptGroup.appendChild(state);\n        }\n    select.appendChild(stateOptGroup);\n\n    container.appendChild(select);\n\n    politicians.className = 'politicians';\n    container.appendChild(politicians);\n\n    good.className = 'team internet';\n\n    goodHeadline.textContent = 'Team Internet';\n    good.appendChild(goodHeadline);\n\n    goodSubHead.textContent = 'These politicians are standing up for the free Internet and oppose mass surveillance.';\n    good.appendChild(goodSubHead);\n\n    goodPoliticians.className = 'filtered';\n    good.appendChild(goodPoliticians);\n\n    politicians.appendChild(good);\n\n    bad.className = 'team surveillance';\n\n    badHeadline.textContent = 'Team NSA';\n    bad.appendChild(badHeadline);\n\n    badSubHead.textContent = 'These politicians are working with monopolies to control the Internet for power and profit.';\n    bad.appendChild(badSubHead);\n\n    badPoliticians.className = 'filtered';\n    bad.appendChild(badPoliticians);\n\n    politicians.appendChild(bad);\n\n    meh.className = 'team unknown';\n\n    mehHeadline.textContent = 'Unclear';\n    meh.appendChild(mehHeadline);\n\n    mehPoliticians.className = 'filtered';\n    meh.appendChild(mehPoliticians);\n\n    container.appendChild(meh);\n\n    return container;\n};\n\n;var PoliticianView = function(data) {\n    var\n        div = $c('div'),\n        headshot = $c('div'),\n        img = $c('i'),            // JL NOTE ~ chrome bug fix, remove after issue is gone\n        tweetLink = $c('button'),\n        infoLink = $c('button'),\n        name = $c('h4'),\n        grade = $c('h3'),\n        rollover = $c('div');\n\n    // JL NOTE ~ removed headshot background due to chrome bug. maybe re-add someday?\n    /* headshot.style.backgroundImage = 'url(congress/' + data.politician.image + ')'; */\n    headshot.classList.add('headshot');\n\n    if (data.politician.score >= 6) {\n        div.classList.add('good');\n    } else if (data.politician.score >= 0) {\n        div.classList.add('neutral');\n    } else {\n        div.classList.add('bad');\n    }\n\n    // JL NOTE ~ added this to fix chrome bug, bah -----------------------------\n    img.classList.add('congressional-head', data.politician.image.replace('.jpg', ''));\n    headshot.appendChild(img);\n    // -------------------------------------------------------------------------\n\n    div.appendChild(headshot);\n\n    name.textContent = data.politician.last_name;\n    div.appendChild(name);\n\n    if (!data.noGrade) {\n        grade.classList.add('grade');\n        grade.textContent = data.politician.grade;\n        div.appendChild(grade);\n    }\n\n    rollover.classList.add('rollover');\n\n    tweetLink.classList.add('tweet_link');\n    rollover.appendChild(tweetLink);\n\n    infoLink.classList.add('info_link');\n    infoLink.textContent = 'i';\n    rollover.appendChild(infoLink);\n\n    div.appendChild(rollover);\n\n    if (data.extraInfo) {\n        var ul = $c('ul');\n        ul.classList.add('extra_info');\n        console.log('owl');\n\n        if (data.politician.twitter) {\n            var li = $c('li'),\n                a = $c('a');\n            a.classList.add('inline_tweet');\n            a.href = '#';\n            a.textContent = '@' + data.politician.twitter;\n            li.appendChild(a)\n            ul.appendChild(li);\n        }\n        if (data.politician.phone) {\n            var li = $c('li'),\n                a = $c('a');\n            a.href = 'tel://'+data.politician.phone;\n            a.textContent = data.politician.phone;\n            li.appendChild(a)\n            ul.appendChild(li);\n        }\n        div.appendChild(ul);\n    }\n\n    if (data.state == 'all' || data.state == 'senate' || data.state == 'house'){\n\n        var block = $c('div');\n        if (data.politician.state_short)\n            block.textContent = data.politician.state_short;\n        else\n            block.textContent = '?';\n        if (data.politician.score >= 6) {\n            block.classList.add('good');\n        } else if (data.politician.score >= 0) {\n            block.classList.add('neutral');\n        } else {\n            block.classList.add('bad');\n        }\n        var hidden = $c('div');\n        hidden.className = 'peekaboo';\n        var politician = $c('div');\n        politician.className = 'politician';\n        politician.appendChild(div)\n        hidden.appendChild(politician);\n        block.appendChild(hidden);\n\n\n        return block;\n    } else\n        return div;\n};\n\n;var PoliticianModalView = function (data) {\n    var\n        modal = $c('div'),\n        close = $c('button'),\n        title = $c('h2'),\n        voteList = $c('ul');\n\n    modal.classList.add('modal', 'politician_modal');\n    close.classList.add('close');\n    close.textContent = '⨉';\n    title.textContent = 'How '+data.name+' Voted…';\n\n    modal.appendChild(close);\n    modal.appendChild(title);\n    console.log(data);\n\n\n    for (var i = 0; i < data.positions.length; i++) {\n        var position = $c('li');\n        if (data.positions[i].score < 0) {\n            position.className = 'bad';\n        } else {\n            position.className = 'good';\n        }\n        if (data.positions[i].url === undefined){\n            position.textContent = data.positions[i].info;\n            voteList.appendChild(position);\n        }\n        else {\n            var position_link = $c('a');\n            position_link.href = data.positions[i].url;\n            position_link.target = \"_blank\";\n            position_link.textContent = data.positions[i].info;\n\n            position.appendChild(position_link);\n            voteList.appendChild(position);\n\n        }\n    }\n\n    modal.appendChild(voteList);\n\n    return modal;\n};\n\n;if (!util) var util = {};\n\nutil.generateSpinner = function() {\n    var spinContainer = $c('div');\n    spinContainer.className = 'spinnerContainer';\n\n    var spinner = $c('div');\n    spinner.className = 'spinner';\n    spinContainer.appendChild(spinner);\n\n    for (var i = 1; i <= 12; i++) {\n        var blade = $c('div');\n        blade.className = 'blade d' + (i < 10 ? '0'+i : i);\n\n        var subdiv = $c('div');\n        blade.appendChild(subdiv);\n\n        spinner.appendChild(blade);\n    }\n    return spinContainer;\n};\n\nutil.getReferrerTag = function() {\n    var ref = document.referrer;\n    if (ref.indexOf('facebook.com') !== -1)\n        return 'from-facebook';\n    else if (ref.indexOf('twitter.com') !== -1 || ref.indexOf('t.co') !== -1)\n        return 'from-twitter';\n    else if (ref.indexOf('reddit.com') !== -1)\n        return 'from-reddit';\n    else if (window.location.href.indexOf('_src=ga') !== -1)\n        return 'from-google-adwords';\n    else if (ref.indexOf('google.com') !== -1)\n        return 'from-google';\n}\n\nutil.parseQueryString = function () {\n    var\n        i,\n        pairs,\n        queryObject = {},\n        queryString = window.location.search;\n\n    if (queryString[0] === '?') {\n        queryString = queryString.substr(1);\n    }\n\n    pairs = queryString.split('&');\n    i = pairs.length;\n\n    while (i--) {\n        queryObject[pairs[i].split('=')[0]] = pairs[i].split('=')[1];\n    }\n\n    return queryObject;\n}\n\n;var TWEET_BLASTER_URL = 'https://tweet-congress.herokuapp.com';\n//var TWEET_BLASTER_URL = 'http://metacube:9000';\nvar SPREADSHEET_URL = 'https://spreadsheets.google.com/feeds/list/1rTzEY0sEEHvHjZebIogoKO1qfTez2T6xNj0AScO6t24/default/public/values?alt=json';\n\nvar DEFAULT_TWEETS = [\n    '#StopCISA—the largest mass surveillance bill since the PATRIOT Act www.decidethefuture.org',\n    'please vote to #StopCISA—this bill is bad for cybersecurity and human rights. www.decidethefuture.org',\n    '#StopCISA! Keep our private data out of the hands of insecure government agencies www.decidethefuture.org',\n    '#StopCISA! Don\\'t give companies immunity for violating their privacy policies. www.decidethefuture.org',\n    '#StopCISA—Don\\'t trade our privacy for a law that won\\'t even fix our cybersecurity www.decidethefuture.org',\n    '#CISA erodes user privacy and consumer trust in American tech businesses. Vote NO www.decidethefuture.org',\n    'People hate #CISA. Tech companies hate #CISA. Privacy matters. Respect it! www.decidethefuture.org',\n    'Supporting #CISA is a good way to show you have no idea how to protect us—vote NO www.decidethefuture.org',\n    'Don\\'t give companies immunity for getting hacked and leaking my data. #StopCISA! www.decidethefuture.org',\n    '#CISA allows government to secretly investigate people for minor crimes. Vote NO! www.decidethefuture.org',\n]\n\nvar STATES = {\n    'AL': 'Alabama',\n    'AK': 'Alaska',\n    'AZ': 'Arizona',\n    'AR': 'Arkansas',\n    'CA': 'California',\n    'CO': 'Colorado',\n    'CT': 'Connecticut',\n    'DE': 'Delaware',\n    'FL': 'Florida',\n    'GA': 'Georgia',\n    'HI': 'Hawaii',\n    'ID': 'Idaho',\n    'IL': 'Illinois',\n    'IN': 'Indiana',\n    'IA': 'Iowa',\n    'KS': 'Kansas',\n    'KY': 'Kentucky',\n    'LA': 'Louisiana',\n    'ME': 'Maine',\n    'MD': 'Maryland',\n    'MA': 'Massachusetts',\n    'MI': 'Michigan',\n    'MN': 'Minnesota',\n    'MS': 'Mississippi',\n    'MO': 'Missouri',\n    'MT': 'Montana',\n    'NE': 'Nebraska',\n    'NV': 'Nevada',\n    'NH': 'New Hampshire',\n    'NJ': 'New Jersey',\n    'NM': 'New Mexico',\n    'NY': 'New York',\n    'NC': 'North Carolina',\n    'ND': 'North Dakota',\n    'OH': 'Ohio',\n    'OK': 'Oklahoma',\n    'OR': 'Oregon',\n    'PA': 'Pennsylvania',\n    'RI': 'Rhode Island',\n    'SC': 'South Carolina',\n    'SD': 'South Dakota',\n    'TN': 'Tennessee',\n    'TX': 'Texas',\n    'UT': 'Utah',\n    'VT': 'Vermont',\n    'VA': 'Virginia',\n    'WA': 'Washington',\n    'WV': 'West Virginia',\n    'WI': 'Wisconsin',\n    'WY': 'Wyoming',\n};\n\nvar politicians = new Politicians();\nvar unfilteredPoliticians = new Politicians();\nvar geocode = null;\n\n// get the spreadsheet from google\nvar xhr = new XMLHttpRequest();\nxhr.onreadystatechange = function () {\n    if (xhr.readyState === 4) {\n        var res = JSON.parse(xhr.response);\n        for (var i = 0; i < res.feed.entry.length; i++) {\n            var entry = res.feed.entry[i];\n            var politician = new Politician();\n            politician.populateFromGoogle(entry);\n            politicians.add(politician);\n            unfilteredPoliticians.add(politician);\n        }\n\n        // convert to a filter collection (which allows us to filter on state)\n        politicians = new PoliticiansFilter(politicians);\n\n        checkIfFinishedWithXHRs();\n    }\n};\nxhr.open(\"get\", SPREADSHEET_URL, true);\nxhr.send();\n\n// grab the user's location\nvar xhr2 = new XMLHttpRequest();\nxhr2.onreadystatechange = function () {\n    if (xhr2.readyState === 4) {\n        var res = JSON.parse(xhr2.response);\n\n        geocode = res;\n        checkIfFinishedWithXHRs();\n    }\n};\nxhr2.open(\"get\", 'https://fftf-geocoder.herokuapp.com', true);\nxhr2.send();\n\n\n\n// only initialize scoreboard if the spreadsheet & location have loaded via XHR\nvar checkIfFinishedWithXHRs = function () {\n    if (politicians.models().length && geocode)\n        initializeScoreboard();\n};\n\nvar renderTopStateSelector = function() {\n    if (!document.getElementById('placeholder_state_name'))\n      return;\n    document.getElementById('placeholder_state_name').style.display = 'none';\n    var select = $c('select');\n    for (var state in STATES) {\n        if (STATES.hasOwnProperty(state)) {\n            var option = $c('option');\n            option.textContent = STATES[state];\n            option.value = state;\n            if (politicians.state == state)\n                option.selected = true;\n            select.appendChild(option)\n        }\n    }\n    select.onchange = function() {\n        var state = this.options[this.options.selectedIndex].value;\n        var sbState = document.getElementById('_ps_choose_state');\n        for (var i = 0; i < sbState.options.length; i++) {\n            if (sbState.options[i].value == state)\n                sbState.options[i].selected = true;\n        }\n        var event = new UIEvent(\"change\", {\n            \"view\": window,\n            \"bubbles\": true,\n            \"cancelable\": true\n        });\n        sbState.dispatchEvent(event);\n        setTimeout(function() {\n            loadTopPoliticiansByState();\n        }, 10);\n    }\n    select.onclick = function() {\n        document.getElementById('just_state').checked = true;\n        handleTweetSelectorLabels();\n    }\n    document.getElementById('state_selector').appendChild(select);\n}\n\nvar topPoliticians = [null, null];\nvar hasTweeted = false;\n\nvar generateTweetTextFromTopPoliticians = function() {\n    var tweet = '';\n\n    if (topPoliticians[0].model.get('twitter'))\n        tweet += '.@'+topPoliticians[0].model.get('twitter')+', ';\n    else\n        tweet += 'Sen. '+topPoliticians[0].model.get('last_name')+', ';\n\n    if (topPoliticians[1].model.get('twitter'))\n        tweet += '@'+topPoliticians[1].model.get('twitter')+' ';\n    else\n        tweet += 'Sen. '+topPoliticians[1].model.get('last_name')+' ';\n\n    tweet += document.getElementById('tweet_text').value;\n\n    // tweet += ' http://decidethefuture.org';\n\n    console.log('tweet:', tweet);\n    return tweet;\n}\n\nvar loadTopPoliticiansByState = function() {\n    var senators = politicians.select({organization: 'Senate'});\n    for (var i=0; i < senators.length; i++) {\n        if (topPoliticians[i])\n            topPoliticians[i].release();\n\n        topPoliticians[i] = new PoliticianController({\n            model: senators[i],\n            noGrade: true,\n            extraInfo: true,\n            inject: '#targets .side'+i\n        });\n    }\n}\n\nvar handleTweetSelectorLabels = function() {\n    if (!document.getElementById('EVERYONE'))\n      return;\n\n    if (document.getElementById('EVERYONE').checked) {\n        document.getElementById('EVERYONE_label').className = 'sel';\n        document.getElementById('just_state_label').className = '';\n        document.getElementById('tweet_blaster_frame').style.display = 'block';\n        document.getElementById('tweet_your_state').style.display = 'none';\n    } else {\n        document.getElementById('EVERYONE_label').className = '';\n        document.getElementById('just_state_label').className = 'sel';\n        document.getElementById('tweet_blaster_frame').style.display = 'none';\n        document.getElementById('tweet_your_state').style.display = 'block';\n    }\n}\n\nvar handleRemainingTweetText = function() {\n    if (!document.getElementById('tweet_text'))\n      return;\n    var remaining = 105 - document.getElementById('tweet_text').value.length;\n    document.getElementById('remaining').textContent = remaining;\n    if (remaining <= 10)\n        document.getElementById('remaining').className = 'danger';\n    else\n        document.getElementById('remaining').className = '';\n}\n\nvar initializeScoreboard = function () {\n\n    // select the state if the geocoder didn't give us something bogus\n    if (\n        geocode.subdivisions\n        &&\n        geocode.subdivisions.length\n        &&\n        geocode.subdivisions[0].iso_code\n        &&\n        STATES.hasOwnProperty(geocode.subdivisions[0].iso_code)\n    )\n        politicians.state = geocode.subdivisions[0].iso_code;\n\n    politicians.refresh();\n    renderTopStateSelector();\n    loadTopPoliticiansByState();\n\n    if (util.getParameterByName('autotweet')) {\n        var tweetText = generateTweetTextFromTopPoliticians();\n        window.location.replace('https://twitter.com/intent/tweet?text='+encodeURIComponent(tweetText));\n    }\n\n\n    var spinner = document.querySelector('#scoreboard_data .spinnerContainer');\n\n    if (spinner)\n        spinner.remove();\n\n    new PoliticalScoreboardController({\n        collection: politicians,\n        inject: '#scoreboard_data'\n    });\n\n    var bioguide = util.getParameterByName('politician');\n    if (bioguide) {\n        var model = unfilteredPoliticians.select_one({bioguide: bioguide});\n        if (model)\n            new PoliticianModalController({model: model});\n        window.location.replace('#scoreboard');\n    }\n    var searchInput = document.getElementById(\"nameSearch\");\n    searchInput.addEventListener(\"keyup\",filterByPartialName)\n\n\n\n};\n\n\n\nvar filterByPartialName = function(){\n\n    var name = document.getElementById(\"nameSearch\").value;\n\n    var names = name.toLowerCase().split(\" \")\n\n    var distanceThreshold = 3;\n\n    function levenshteinDistance (str1, str2) {\n        if (typeof(str1) !== 'string' || typeof(str2) !== 'string') throw new Error('Pass two strings!')\n\n        var distances = []\n\n        for (var i = 0; i <= str1.length; ++i) distances[i]    = [ i ]\n        for (var i = 0; i <= str2.length; ++i) distances[0][i] =   i\n\n        for (var j = 1; j <= str2.length; ++j)\n            for (var i = 1; i <= str1.length; ++i)\n\n            distances[i][j] =\n\n                str1[i - 1] === str2[j - 1] ? // if the characters are equal\n                distances[i - 1][j - 1] :     // no operation needed\n                                            // else\n                Math.min.apply(Math, [        // take the minimum between\n                distances[i - 1][  j  ] + 1 // a  deletion\n                , distances[  i  ][j - 1] + 1 // an insertion\n                , distances[i - 1][j - 1] + 1 // a  substitution\n            ])\n\n        return distances[str1.length][str2.length]\n    }\n    var results =[]\n\n    for (var i =0;i < names.length;i++){\n        var n = names[i];\n        if (n.length < 3){\n            continue;\n        }\n\n        var filtered = unfilteredPoliticians.filter(function(m){\n        var fname = m.get(\"first_name\").toLowerCase();\n        if (levenshteinDistance(n,fname) < distanceThreshold){\n            return true;\n        }\n        if (fname.match(n)){\n            return true;\n        }\n        var lname = m.get(\"last_name\").toLowerCase();\n        if (levenshteinDistance(n,lname) < distanceThreshold){\n            return true;\n        }\n        if(lname.match(n)){\n            return true;\n        }\n        return false;\n    })\n        results = results.concat(filtered);\n\n    }\n    console.log(results);\n\n    var results_elem = document.getElementById('nameResults');\n    while (results_elem.firstChild) {\n        results_elem.removeChild(results_elem.firstChild);\n    }\n    var frag = document.createDocumentFragment()\n    for(var i =0; i < results.length;i++){\n        var div = document.createElement(\"div\");\n        var button = document.createElement(\"button\");\n        var text = document.createTextNode(results[i].get(\"first_name\") + \" \" +results[i].get(\"last_name\") + \": \" + results[i].get(\"grade\"));\n        var score = results[i].get(\"score\");\n\n\n        if (score >= 6) {\n            div.classList.add('good');\n        } else if (score >= 0) {\n            div.classList.add('neutral');\n        } else {\n            div.classList.add('bad');\n        }\n        button.appendChild(text);\n\n        var cb = (function(model){\n            return function (){new PoliticianModalController({model: model });}\n        })(results[i]);\n\n        button.addEventListener(\"click\", cb);\n\n        var br = document.createElement(\"br\");\n        div.appendChild(button)\n        frag.appendChild(div);\n        frag.appendChild(br);\n        frag.appendChild(br);\n    }\n    results_elem.appendChild(frag);\n}\n\n\nvar alreadyBlasted = false;\n\nwindow.onhashchange = function () {\n    if (window.location.hash == '#blast' && alreadyBlasted == false) {\n        document.getElementById('tweet_blaster_frame').src = TWEET_BLASTER_URL+'/blast?tweet='+encodeURIComponent(document.getElementById('tweet_text').value);\n        window.location.hash = '#';\n        alreadyBlasted = true;\n        popCallModal(true);\n    }\n}\n\n\n// Org coin toss\nif (!util.getParameterByName('org')) {\n    var coinToss = Math.random();\n\n    if (coinToss > .1)\n        window.org = 'fftf';\n    else\n        window.org = 'rt4';\n}\nvar org = util.getParameterByName('org') || window.org;\n\nif (org == 'rt4')\n    window.DONATE_URL = 'https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=245ZSF2CHHYXN';\nelse\n    window.DONATE_URL = 'https://donate.fightforthefuture.org/?tag=decidethefuture';\n\nvar popCallModal = function(tweeted) {\n    new CallModalController({\n        headline:   (tweeted ? 'Thanks for tweeting! Now can you call Congress?' : 'Can you call Congress to #StopCISA?'),\n        campaign:   'cisa-cloture-fax',\n        cta:        'Congress needs to understand that CISA is a dirty mass surveillance bill that won\\'t protect us from cyber attacks. Enter your phone number and we\\'ll connect you to Congress, or dial 1-985-222-CISA on your phone.',\n        callScript: 'Please oppose CISA, the Cybersecurity Information Sharing Act. CISA won\\'t fix the cybersecurity problems we face in the U.S.—it will only lead to more warrantless mass surveillance of millions of Americans. We need real cybersecurity legislation, and it\\'s not CISA.',\n        shareText:  'We\\'re up against some of the most powerful corporate lobbyists in the country, but that hasn\\'t stopped us before. If a critical mass of citizens speak out against CISA, our voices will be impossible to ignore.',\n    });\n}\n\nvar onDomContentLoaded = function() {\n\n    if (politicians.models().length == 0) {\n        var spinner = util.generateSpinner();\n        if (document.getElementById('scoreboard_data'))\n          document.getElementById('scoreboard_data').appendChild(spinner);\n    }\n\n    if (document.querySelector('.action a.tweet'))\n      document.querySelector('.action a.tweet').addEventListener('click', function(e){\n          e.preventDefault();\n          if (!topPoliticians[0])\n              return alert('Hold on, still loading your senators :)');\n\n          var tweetText = generateTweetTextFromTopPoliticians();\n          var win = window.open('https://twitter.com/intent/tweet?text='+encodeURIComponent(tweetText), 'zetsubou_billy', 'width=500, height=300, toolbar=no, status=no, menubar=no');\n\n          var pollTimer = window.setInterval(function() {\n              if (win.closed !== false) { // !== is required for compatibility with Opera\n                  window.clearInterval(pollTimer);\n                  if (hasTweeted == false)\n                      popCallModal(true);\n                  hasTweeted = true;\n              }\n          }, 200);\n      });\n\n\n    handleTweetSelectorLabels();\n    if (document.getElementById('EVERYONE'))\n      document.getElementById('EVERYONE').addEventListener('change', function() {\n          handleTweetSelectorLabels();\n      });\n    if (document.getElementById('just_state'))\n      document.getElementById('just_state').addEventListener('change', function() {\n          handleTweetSelectorLabels();\n      });\n    if (document.getElementById('tweet_text')) {\n      document.getElementById('tweet_text').addEventListener('change', function() {\n          handleRemainingTweetText();\n      });\n      document.getElementById('tweet_text').addEventListener('keyup', function() {\n          handleRemainingTweetText();\n      });\n    }\n    if (document.getElementById('call_congress'))\n      document.getElementById('call_congress').addEventListener('click', function(e) {\n          e.preventDefault();\n          popCallModal();\n      });\n    if (util.getParameterByName('call')) {\n        popCallModal();\n    }\n    var random_tweet = DEFAULT_TWEETS[Math.floor(Math.random()*DEFAULT_TWEETS.length)];\n    if (document.getElementById('tweet_text'))\n      document.getElementById('tweet_text').value = random_tweet;\n\n    handleRemainingTweetText();\n\n    if (document.getElementById('dumbcalltool')) {\n        document.getElementById('dumbcalltool').addEventListener('submit', function(e) {\n            e.preventDefault();\n\n            if (!util.validatePhone(document.getElementById('dumbphonenumber').value)) {\n                alert('Please enter a valid phone number!');\n                return false;\n            }\n\n            var data = new FormData();\n            data.append('campaignId', 'smh');\n            data.append('org', window.org || 'fftf')\n            data.append('userPhone', util.validatePhone(document.getElementById('dumbphonenumber').value));\n\n            var url = 'https://call-congress.fightforthefuture.org/create';\n\n            var xhr = new XMLHttpRequest();\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState === 4) {\n                    console.log('sent!', xhr.response);\n                }\n            }.bind(this);\n            xhr.open(\"post\", url, true);\n            xhr.send(data);\n\n            new CallScriptModalController({\n                callHeadline: 'Awesome! We\\'re calling your phone!',\n                callInstruction: 'Please be polite and tell your lawmaker:',\n                callScript: 'Please stop the dangerous Rule 41 change and refuse to expand surveillance powers. Vote to pass the Stop Mass Hacking Act.',\n            });\n\n            return false;\n        });\n    }\n\n\n\n    (function (doc, win) {\n        \"use strict\";\n\n        var\n            viewMoreLinks = doc.getElementsByClassName('expand-me'),\n            links = viewMoreLinks.length;\n\n// -------------------------------------------------------------------------\n// This is here until the links that make up each company on the Corporate\n// scoreboard are ready to turn into tweets.\nif (doc.getElementById('scoreboard_corporate')) {\n\n        var\n            i, j,\n            corporateScoreboard = doc.getElementById('scoreboard_corporate').getElementsByTagName('table'),\n            tableLinks;\n\n        i = corporateScoreboard.length;\n        while (i--) {\n\n            tableLinks = corporateScoreboard[i].getElementsByTagName('a');\n            j = tableLinks.length;\n\n            while (j--) {\n                tableLinks[j].addEventListener('click', function (e) {\n                    e.preventDefault();\n                });\n            }\n        }\n}\n\n// -------------------------------------------------------------------------\n\n        function expandArticle(e) {\n            e.preventDefault();\n\n            console.log('derp');\n\n            var\n                href = e.target.getAttribute('href').replace(/#/, '');\n            doc.getElementById(href).classList.add('expanded');\n        }\n\n        while (links--) {\n            viewMoreLinks[links].addEventListener('click', expandArticle);\n        }\n\n        if (document.getElementById('petition-form'))\n          win.components.petitions(doc, win);\n\n        if (document.getElementById('whiplist'))\n          win.components.whiplist(doc, win);\n\n    })(document, window);\n};\n\n// Wait for DOM content to load.\nif (document.readyState == \"complete\" || document.readyState == \"loaded\" || document.readyState == \"interactive\") {\n    onDomContentLoaded();\n} else if (document.addEventListener) {\n    document.addEventListener('DOMContentLoaded', onDomContentLoaded, false);\n}\n\n(function (doc, win) {\n  \"use strict\";\n\n  win.callbacks = win.callbacks || {};\n  win.callbacks.petitions = {\n    preSubmit: function() {\n      document.body.querySelector('[type=\"submit\"]').disabled = true;\n    },\n\n    loadSignatureResponse: function(e) {\n      var xhr = e.target;\n      if (xhr.status >= 200 && xhr.status < 400) {\n\n        // popCallModal();\n        var\n          form = document.getElementById('petition-form'),\n          thanks = document.getElementById('thanks');\n        document.getElementById('form-headline').classList.add('hidden');\n        thanks.classList.remove('hidden');\n        form.removeAttribute('style');\n        form.innerHTML = '';\n        form.appendChild(thanks);\n\n      } else {\n         handleSigningError(xhr);\n      }\n    },\n\n    handleSigningError: function(e) {\n      document.body.querySelector('[type=\"submit\"]').disabled = false;\n      console.log('AN ERROR OCCURRED WHILE SENDING YOUR PETITION: ', e);\n      alert('AN ERROR OCCURRED WHILE SENDING YOUR PETITION');\n    }\n  }\n\n})(document, window);\n\n//# sourceMappingURL=core.js.map"]}